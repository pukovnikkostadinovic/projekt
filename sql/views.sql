DROP TABLE IF EXISTS baza_komponenti2.komp_lok_kol_v1; CREATE OR REPLACE VIEW baza_komponenti2.komp_lok_kol_v1 AS select `d`.`id` AS `id`,`k`.`id` AS `komp_id`,`k`.`ime_komponente` AS `ime_komponente`,`l`.`ime_lokacije` AS `ime_lokacije`,`d`.`kolicina` AS `kolicina` from `baza_komponenti2`.`komponente` `k` join `baza_komponenti2`.`lokacije` `l` join `baza_komponenti2`.`komp_lok_kol` `d` where ((`k`.`id` = `d`.`komp_id`) and (`l`.`id` = `d`.`lok_id`)); 
DROP TABLE IF EXISTS baza_komponenti2.komp_lok_kol_v2; CREATE OR REPLACE VIEW baza_komponenti2.komp_lok_kol_v2 AS select `d`.`id` AS `id`,`d`.`lok_id` AS `lok_id`,`k`.`ime_komponente` AS `ime_komponente`,`l`.`ime_lokacije` AS `ime_lokacije`,`d`.`kolicina` AS `kolicina` from `baza_komponenti2`.`komponente` `k` join `baza_komponenti2`.`lokacije` `l` join `baza_komponenti2`.`komp_lok_kol` `d` where ((`k`.`id` = `d`.`komp_id`) and (`l`.`id` = `d`.`lok_id`)); 
DROP TABLE IF EXISTS baza_komponenti2.komponente_v1; CREATE OR REPLACE VIEW baza_komponenti2.komponente_v1 AS select `k`.`id` AS `komp_id`,`k`.`kateg_id` AS `kateg_id`,`k`.`ime_komponente` AS `ime_komponente`,`k`.`kratak_opis_komp` AS `kratak_opis_komp`,sum(coalesce(`d`.`kolicina`,0)) AS `komada` from (`baza_komponenti2`.`komponente` `k` left join `baza_komponenti2`.`komp_lok_kol` `d` on((`k`.`id` = `d`.`komp_id`))) group by `k`.`id`,`k`.`kateg_id`,`k`.`ime_komponente`,`k`.`kratak_opis_komp`; 
